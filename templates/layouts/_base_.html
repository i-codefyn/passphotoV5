{% load static %}<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>{% block title %} Passport Size Photo | Pass Photo{% endblock %}</title>
    <link rel="shortcut icon" type="image/png" href="{% static 'images/favicon.ico' %}"/>
    {% load static compress %}
    {% compress css %}
    <link rel="stylesheet" type="text/css" href="{% static 'css/style.css' %}" />
    <link rel="stylesheet" type="text/css" href="{% static 'vendor/font/bootstrap-icons.css' %}"/>
    {% endcompress %}
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Poppins:400,500,600" />
    <link href="{% static 'vendor/bootstrap-5.0.2/css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'vendor/cropper/css/cropper.min.css' %}" rel="stylesheet">
    <script type="text/javascript" src="{% static 'vendor/bootstrap-5.0.2/js/bootstrap.bundle.min.js' %}"></script>
    <script type="text/javascript" src="{% static 'vendor/sweetalert/sweetalert2.all.js' %}"></script>
  </head>
  <body>

    {% block messages %}
    {% include 'includes/messages.html' with messages=messages %}
    {% endblock %}
    {% block content %}
    {% endblock %}
    
    <script src="{% static 'js/jquery-3.1.1.min.js' %}"></script>
    <script src="{% static 'vendor/cropper/js/cropper.min.js' %}"></script>
    <script type="text/javascript">
      $(document).ready(function(){
          $('#delete_btn').click(function(){
              
              Swal.fire({
               title: "Want to Download Selected !",
               text: "You won't be able to revert this!",
               icon: "warning",
               showCancelButton: true,
               confirmButtonColor: "#3085d6",
               cancelButtonColor: "#d33",
               confirmButtonText: "Yes!"
             }).then((result) => {
               if (result.isConfirmed) {
                 confirmDownload()
              
               }
             });
             function confirmDownload() {
                  var id = [];
                  var csrf=$('input[name=csrfmiddlewaretoken]').val()
                  // $('[name="csrfmiddlewaretoken"]').val()
                  // const csrftoken = document.querySelector('[name=csrfmiddlewaretoken]').value;
                  $(':checkbox:checked').each(function(i){
                      id[i]=$(this).val();
                  })
                  if(id.length ===0){
                   Swal.fire({
                     icon: 'error',
                     title: 'Validation Error!!!',
                     text: 'Please select to Download!',
                   
                     })
                  }else{
                      console.log(id);
                      $.ajax({
                        url:'.',
                        method:"POST",
                       
                        data:{
                           
                            id,
                            // csrfmiddlewaretoken:csrftoken
                            'csrfmiddlewaretoken': csrf,
                        },
                          success:function(response){
                            var img = new Image();
                            const link = document.createElement('a');
                            img.src = 'data:image/jpeg;base64,' + response;
                            link.href = img.src;
                            link.setAttribute('download', 'passphoto.jpg');
                            link.click();
                            
                          } 
                      })
                  }
              }
          }) 
      })
 
  
  </script>  
 <script>
  function confirmFunction() {
    event.preventDefault(); // prevent form submit
    var form = event.target.form; // storing the form
    Swal.fire({
      title: "Are you sure?",
      text: "You won't be able to revert this!",
      type: "warning",
      showCancelButton: true,
      confirmButtonColor: "#3085d6",
      cancelButtonColor: "#d33",
      confirmButtonText: "Yes, Delete It!",
    }).then((result) => {
      if (result.value) {
        form.submit();
      }
    });
  }
  //end delete alert

  $(document).ready(function() {
    $(".mob-menu span").click(function(){
       $(".main-menu").slideToggle();
      });
   });
</script>
